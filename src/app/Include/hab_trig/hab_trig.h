/**********************************************************************************************************************
* hab_trig.h                                                                                                          *
***********************************************************************************************************************
* DESCRIPTION :                                                                                                       *
*       Header file for declaring trigger types and functions used for controlling them                               *
*                                                                                                                     *
* PUBLIC TYPEDEFS :                                                                                                   *
*       ---                                                                                                           *
*                                                                                                                     *
* PUBLIC FUNCTIONS :                                                                                                  *
*       habtrig_t *         habtrig_alloc(void);                                                                      *
*       void                habtrig_free(habtrig_t *trig);                                                            *
*       stdret_t            habtrig_register(habtrig_t *trig, u32 period_ms);                                         *
*                                                                                                                     *
* AUTHOR :                                                                                                            *
*       Yahor Yauseyenka    email: yahoryauseyenka@gmail.com                                                          *
*                                                                                                                     *
* VERSION                                                                                                             *
*       0.0.1               last modification: 13-04-2024                                                             *
*                                                                                                                     *
* LICENSE                                                                                                             *
*       GPL                                                                                                           *
*                                                                                                                     *
***********************************************************************************************************************/

#ifndef __HAB_TRIG_H__
#define __HAB_TRIG_H__

/**********************************************************************************************************************
 *  INCLUDES
 *********************************************************************************************************************/
#include "stdtypes.h"

/**********************************************************************************************************************
 *  PREPROCESSOR DEFINITIONS
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  TYPEDEFS DEFINITION
 *********************************************************************************************************************/
typedef enum {
    T_IRQ = 0,
    T_HRTIM,
} trigtype_t;

typedef struct {
    u8       id;
    u8       index;
    u32      period_ms;
    char     name[64];
    trigtype_t type;
} habtrig_t;

/**********************************************************************************************************************
 * GLOBAL FUNCTION DECLARATION
 *********************************************************************************************************************/
habtrig_t *habtrig_alloc(void);
habtrig_t *habtrig_get(const int index);
void habtrig_free(habtrig_t *trig);
stdret_t habtrig_register(habtrig_t *trig, u32 period_ms);

#endif /* __HAB_TRIG_H__ */